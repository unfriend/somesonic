<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SomeSonic - Subsonic Music Player</title>
    <link rel="stylesheet" href="src/styles/main.css">
</head>
<body>
    <div id="app">
        <!-- Menu Bar -->
        <div id="menubar">
            <div class="menu-item" data-menu="file">File</div>
            <div class="menu-item" data-menu="edit">Edit</div>
            <div class="menu-item" data-menu="view">View</div>
            <div class="menu-item" data-menu="playback">Playback</div>
            <div class="menu-item" data-menu="library">Library</div>
            <div class="menu-item" data-menu="help">Help</div>
        </div>

        <div id="main-container">
            <!-- Sidebar -->
            <div id="sidebar">
                <div id="library-tree">
                    <!-- Library tree will be populated by JavaScript -->
                    <div class="loading-message">Loading library...</div>
                </div>

                <div id="sidebar-controls">
                    <div class="control-row" style="justify-content: space-between; font-size: 10px; color: #888;">
                        <span>View</span>
                        <span>Filter</span>
                    </div>
                    <div class="control-row">
                        <select id="view-select">
                            <option value="artist-album">by artist/album</option>
                            <option value="artist">by artist</option>
                            <option value="album">by album</option>
                            <option value="genre">by genre</option>
                        </select>
                        <input type="text" id="filter-input" placeholder="Filter...">
                    </div>
                </div>

                <div id="cover-art-display">
                    <img id="sidebar-cover" src="" alt="Album Art" style="display: none;">
                    <div id="cover-placeholder">
                        <svg width="100%" height="100%" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid slice">
                            <rect width="300" height="300" fill="#1a1a1a"/>
                            <text x="150" y="150" fill="#333" text-anchor="middle" font-size="14">No Album Selected</text>
                        </svg>
                    </div>
                    <div class="cover-overlay-text" id="cover-overlay-text"></div>
                </div>
            </div>

            <!-- Right Content -->
            <div id="content-area">
                <!-- Waveform Viz -->
                <div id="viz-top">
                    <canvas id="waveformCanvas"></canvas>
                </div>

                <!-- Playlist -->
                <div id="playlist-view">
                    <table class="pl-table">
                        <colgroup>
                            <col style="width: 120px;"> <!-- Art -->
                            <col style="width: 20px;">  <!-- Playing Icon -->
                            <col style="width: 180px;"> <!-- Artist/Album -->
                            <col style="width: 40px;">  <!-- Track No -->
                            <col style="width: auto;">  <!-- Title -->
                            <col style="width: 60px;">  <!-- Duration -->
                        </colgroup>
                        <thead>
                            <tr>
                                <th>Album cover</th>
                                <th>P...</th>
                                <th>Artist/album</th>
                                <th>Track no</th>
                                <th>Title / track artist</th>
                                <th>Duration</th>
                            </tr>
                        </thead>
                        <tbody id="playlist-body">
                            <!-- Playlist will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Spectrogram Viz -->
                <div id="viz-bottom">
                    <canvas id="spectroCanvas"></canvas>
                </div>
            </div>
        </div>

        <!-- Footer Status -->
        <div id="statusbar">
            <span class="status-segment" id="status-format">---</span>
            <span class="status-segment" id="status-bitrate">--- kbps</span>
            <span class="status-segment" id="status-samplerate">--- Hz</span>
            <span class="status-segment" id="status-channels">---</span>
            <span class="status-segment" id="status-time" style="color: #fff;">0:00 / 0:00</span>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Server Settings</h2>
            <div class="form-group">
                <label for="server-url">Server URL:</label>
                <input type="text" id="server-url" placeholder="https://your-server.com">
            </div>
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" placeholder="Username">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Password">
            </div>
            <div class="form-actions">
                <button id="save-settings">Save</button>
                <button id="cancel-settings">Cancel</button>
                <button id="test-connection">Test Connection</button>
            </div>
            <div id="connection-status"></div>
        </div>
    </div>

    <!-- Audio element for playback -->
    <audio id="audio-player" preload="metadata"></audio>

    <!-- JavaScript modules -->
    <script type="module" src="src/index.js"></script>
</body>
</html>
